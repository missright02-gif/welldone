<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <title>å·´é»æ—…éŠè‹±æ–‡æ¸¬é©— - éš¨æ©Ÿé¡Œåº«ç‰ˆ</title>
  <style>
    body {
      font-family: "Microsoft JhengHei", Arial, sans-serif;
      padding: 20px;
      background: #f0f8ff;
    }
    .quiz-container {
      background: white;
      max-width: 650px;
      margin: auto;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }
    h1 { text-align: center; color: #2c3e50; font-size: 24px; }
    h2 { font-size: 18px; color: #34495e; margin-bottom: 20px; line-height: 1.5; }
    .option {
      margin: 12px 0;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 8px;
      transition: background 0.2s;
    }
    .option:hover { background: #f9f9f9; }
    .option label { cursor: pointer; display: block; width: 100%; }
    button {
      margin-top: 15px;
      padding: 12px 20px;
      border: none;
      border-radius: 8px;
      background: #3498db;
      color: white;
      font-size: 16px;
      cursor: pointer;
      width: 100%;
    }
    button:hover { background: #2980b9; }
    button:disabled { background: #bdc3c7; cursor: not-allowed; }
    #result {
      margin-top: 20px;
      font-weight: bold;
      text-align: center;
      min-height: 24px;
    }
    .progress {
      text-align: right;
      font-size: 14px;
      color: #7f8c8d;
      margin-bottom: 10px;
    }
  </style>
</head>
<body>
  <div class="quiz-container">
    <h1>å·´é»æ—…éŠè‹±æ–‡æ¸¬é©—</h1>
    <div id="progress" class="progress"></div>
    <h2 id="question">è¼‰å…¥ä¸­...</h2>
    <div id="audioBox"></div>
    <form id="quizForm"></form>
    <button id="submitBtn" type="button" onclick="checkAnswer()">æäº¤ç­”æ¡ˆ</button>
    <div id="result"></div>
  </div>

  <script>
    // æ•´åˆå¾Œçš„ 10 é¡Œé¡Œåº«
    const questions = [
      {
        question: "1. When is John going to Paris?",
        options: ["Tomorrow", "In a month", "In a week", "In two weeks"],
        correct: "In a month"
      },
      {
        question: "2. What does Stephanie say about signs and maps?",
        options: ["They are cheap.", "They will tell John where to buy tickets.", "They are difficult for foreigners to read.", "They are printed in many different languages."],
        correct: "They are printed in many different languages."
      },
      {
        question: "3. What will John need to buy a ticket from one of the machines?",
        options: ["A Metro pass", "Francs", "A credit card", "Help from an employee"],
        correct: "A credit card"
      },
      {
        question: "4. How often does John say he will probably ride the Metro?",
        options: ["Every day", "Once in two weeks", "twice a week", "For a long trip"],
        correct: "Every day"
      },
      {
        question: "5. How does John feel after talking to Stephanie?",
        options: ["Questionable", "Confident", "Confused", "Ignorant"],
        correct: "Confident"
      },
      {
        question: "6. (Vocabulary) I will go to Paris for a ________ tomorrow.",
        options: ["vacation", "company", "signature", "subway"],
        correct: "vacation"
      },
      {
        question: "7. (Vocabulary) The ________ from Paris teaches French in Taiwan.",
        options: ["forever", "focus", "foreigner", "follower"],
        correct: "foreigner"
      },
      {
        question: "8. (Vocabulary) I always take a ________ to the city center in Paris.",
        options: ["subject", "subway", "submarine", "success"],
        correct: "subway"
      },
      {
        question: "9. (Vocabulary) I always take an underground to ________ the crowds at the rush hours.",
        options: ["available", "average", "arrive", "avoid"],
        correct: "avoid"
      },
      {
        question: "10. (Vocabulary) There are so many ________ visiting Paris during summer vacation.",
        options: ["tools", "tourists", "together", "tattoos"],
        correct: "tourists"
      }
    ];

    let shuffledQuestions = [];
    let currentQuestion = 0;
    let score = 0;

    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    function startQuiz() {
      shuffledQuestions = shuffle([...questions]); 
      currentQuestion = 0;
      score = 0;
      loadQuestion();
    }

    function loadQuestion() {
      const q = shuffledQuestions[currentQuestion];
      document.getElementById("question").innerText = q.question;
      document.getElementById("progress").innerText = `ç¬¬ ${currentQuestion + 1} é¡Œ / å…± ${shuffledQuestions.length} é¡Œ`;

      const audioBox = document.getElementById("audioBox");
      audioBox.innerHTML = q.audio ? `<audio controls><source src="${q.audio}" type="audio/mpeg"></audio>` : "";

      const form = document.getElementById("quizForm");
      form.innerHTML = "";
      
      // é¸é …ä¹Ÿæœƒéš¨æ©Ÿæ’åº
      shuffle([...q.options]).forEach(opt => {
        const div = document.createElement("div");
        div.classList.add("option");
        div.innerHTML = `
          <label>
            <input type="radio" name="answer" value="${opt}"> ${opt}
          </label>
        `;
        form.appendChild(div);
      });
      document.getElementById("result").innerHTML = "";
      document.getElementById("submitBtn").disabled = false;
    }

    function checkAnswer() {
      const result = document.getElementById("result");
      const selectedOption = document.querySelector('input[name="answer"]:checked');

      if (!selectedOption) {
        result.innerHTML = "âš ï¸ è«‹é¸æ“‡ä¸€å€‹ç­”æ¡ˆï¼";
        result.style.color = "orange";
        return;
      }

      const selected = selectedOption.value;
      const correct = shuffledQuestions[currentQuestion].correct;

      if (selected === correct) {
        score++;
        result.innerHTML = "âœ… æ­£ç¢ºï¼";
        result.style.color = "green";
      } else {
        result.innerHTML = "âŒ éŒ¯èª¤ï¼æ­£ç¢ºç­”æ¡ˆæ˜¯: " + correct;
        result.style.color = "red";
      }

      document.getElementById("submitBtn").disabled = true;

      setTimeout(() => {
        currentQuestion++;
        if (currentQuestion < shuffledQuestions.length) {
          loadQuestion();
        } else {
          showFinalScore();
        }
      }, 1500);
    }

    function showFinalScore() {
      const container = document.querySelector(".quiz-container");
      let feedback = score >= 8 ? "å¤ªæ£’äº†ï¼ä½ éå¸¸äº†è§£å·´é»æ—…éŠï¼" : "å†æ¥å†å²ï¼è¤‡ç¿’ä¸€ä¸‹å–®å­—æœƒæ›´å¥½ã€‚";
      container.innerHTML = `
        <h1>ğŸ‰ æ¸¬é©—å®Œæˆï¼</h1>
        <div style="text-align:center; margin: 20px 0;">
            <p style="font-size: 24px;">æ‚¨çš„å¾—åˆ†: <strong>${score}</strong> / ${shuffledQuestions.length}</p>
            <p>${feedback}</p>
        </div>
        <button type="button" onclick="location.reload()">é‡æ–°æŒ‘æˆ°</button>
      `;
    }

    window.onload = startQuiz;
  </script>
</body>
</html>